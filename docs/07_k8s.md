# Kubernetes

K8s는 구글에서 만든 컨테이너 오케스트레이션 시스템이다.

- 자동 배포 및 스케일링: 트래픽에 따라 컨테이너들을 자동으로 업스케일링 또는 다운스케일링할 수 있다.
- 자가치유: 컨테이너가 반응이 없어지면 자동으로 새로운 컨테이너로 교체한다.
- 로드밸런싱: 여러 컨테이너에 트래픽을 자동으로 분산시킨다.
- Service Discovery: 복잡한 절차없이 자동으로 컨테이너간 통신을 제공한다.
- Resource Management: CPU와 메모리를 효율적으로 배분하여 하드웨어 사용을 최적화한다.
- Rolling Update / Rollback: 다운타임 없이 롤링 업데이트를 진행하고 손쉽게 롤백을 할 수 있다.

### K8s Node

K8s가 사용할 수 있는 물리적인 컴퓨터 자원을 Node라고 명칭한다.

#### Node의 종류

- Master Node(Control Plane Node): API Server, Scheduler, Controller, Manager 등이 실행되고 있고 쿠버네티스 클러스터 전체를 통제한다. Master Node에는 Pod을 실행하지 않는다.
- Workder Node: 사용자가 정의한 애플리케이션 컨테이너들이 실행되는 Node

#### Worker Node의 구성

- Kubelet: Master Node와 통신하는 역할.
- Container Runtime: docker, containerD같은 컨테이너를 실행하고 관리하는 런타임
- Kube Proxy: 각 노드의 네트워크 룰을 정의
- Pod: 쿠버네티스에서 사용하는 용어 중 가장 작은 단위. 보통 하나의 Pod에 하나의 컨테이너를 실행하게 된다.

#### Kubernetes Pod

- k8s node에는 Pod를 실행할 수 있다.
- Pod는 k8s에서 사용하는 가장 작은 애플리케이션 단위이다.

#### Multiple K8s Pod

- 리소스만 허락한다면 여러개의 Pod를 Node에서 실행할 수 있다.
- 여러 개의 Node에 균등하게 또는 설정을 통해 특정 Node에만 Pod가 실행되도록 할 수 있다.

#### Multiple Containers in Pod

- Pod 하나에는 하나의 컨테이너를 실행하는 것이 일반적
- 하지만 컨테이너와 밀접한 통신을 요구하는 경우 Pod에 여러개의 컨테이너를 실행할 수도 있다.
  - A Pod의 보조 역할을 하는 B Pod가 존재한다고 가정하면 A Pod가 생성될 때마다 B Pod를 항상 함께 생성해야 한다는 단점이 있다.
  - 매번 2 개의 Pod를 실행하고 삭제하려면 매우 번거롭고 Pod 간의 통신도 설정해줘야 한다.
  - 그래서 밀접한 관계가 있는 경우, 하나의 Pod에 여러 개의 컨테이너를 실행한다.
